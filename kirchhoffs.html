<!doctype html>
<html lang="en" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kirchhoff's Laws</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&amp;display=swap" rel="stylesheet">
  <style>
    body {
      box-sizing: border-box;
    }
    
    * {
      font-family: 'Inter', Arial, sans-serif;
    }
    
    .accordion-content {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.3s ease-out;
      padding: 0 1.25rem;
    }
    
    .accordion-content.expanded {
      max-height: none;
      overflow: visible;
      padding: 1rem 1.25rem;
    }
    
    .accordion-inner {
      padding: 0;
    }
    
    .accordion-icon {
      transition: transform 0.25s ease;
    }
    
    .accordion-icon.rotated {
      transform: rotate(90deg);
    }
    
    .accordion-item {
      transition: box-shadow 0.2s ease;
    }
    
    .accordion-item.expanded {
      box-shadow: 0 4px 12px rgba(27, 156, 90, 0.12);
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
 </head>
 <body class="h-full bg-white">
  <div class="app-wrapper h-full w-full overflow-auto">
   <div class="max-w-3xl mx-auto px-6 py-12 md:px-8 lg:px-12"><!-- Header Section -->
    <header class="mb-12">
    <h1 id="course-title" class="text-4xl md:text-5xl font-bold text-gray-900 leading-tight mb-6">Kirchhoff's Laws</h1>
     <img src="assets/dlsuclass/Header%20-%20Kirchhoff%27s%20Laws.png" alt="Kirchhoff's Laws Header" class="w-full rounded-lg border border-gray-200 mb-6 object-cover" loading="lazy" decoding="async">
     <div class="text-sm text-gray-600 space-y-1">
      <p><span class="font-medium text-gray-700">Week Num:</span> <span id="week-num">2</span></p>
      <p><span class="font-medium text-gray-700">Department:</span> <span id="department">Physics</span></p>
      <p><span class="font-medium text-gray-700">College:</span> <span id="college">Science</span></p>
      <p><span class="font-medium text-gray-700">School:</span> <span id="school">De La Salle University – Manila</span></p>
      <p><span class="font-medium text-gray-700">Teacher:</span> <span id="teacher">Dr. James Salveo L. Olarve</span></p>
     </div>
    </header><!-- Accordion Section -->
    <main class="space-y-3" id="accordion-container"><!-- 1. Introduction -->
     <div class="accordion-item border border-gray-200 rounded-lg overflow-hidden" data-index="0"><button class="accordion-header w-full flex items-center gap-3 px-5 py-4 text-left hover:bg-emerald-50 transition-colors duration-200">
       <svg class="accordion-icon w-4 h-4 flex-shrink-0" viewbox="0 0 24 24" fill="none"><path d="M8 5L19 12L8 19V5Z" fill="#1B9C5A" />
       </svg><span class="font-semibold text-gray-800">1. Introduction</span> </button>
      <div class="accordion-content bg-gray-50">
       <div class="accordion-inner py-4">
        <p class="text-gray-600 text-sm mb-4">In this activity, you will learn how Kirchhoff’s Laws are used to analyze electrical circuits that contain multiple junctions and closed loops, where simple applications of Ohm’s Law are no longer sufficient. Kirchhoff’s Current Law and Kirchhoff’s Voltage Law provide a systematic way to describe how current flows through a circuit and how energy is distributed among its components. You will practice applying these laws by assigning current directions, writing equations for nodes and loops, and solving sets of simultaneous equations that describe the circuit behavior. Through simulation, computation, and actual measurements, you will compare theoretical predictions with experimental results and evaluate the validity of these fundamental laws. This activity emphasizes that Kirchhoff’s Laws are not merely mathematical rules—they are powerful tools grounded in the conservation of charge and energy that allow us to understand, predict, and verify the behavior of real electrical circuits.</p>
       </div>
      </div>
     </div><!-- 2. Module -->
     <div class="accordion-item border border-gray-200 rounded-lg overflow-hidden" data-index="1"><button class="accordion-header w-full flex items-center gap-3 px-5 py-4 text-left hover:bg-emerald-50 transition-colors duration-200">
       <svg class="accordion-icon w-4 h-4 flex-shrink-0" viewbox="0 0 24 24" fill="none"><path d="M8 5L19 12L8 19V5Z" fill="#1B9C5A" />
       </svg><span class="font-semibold text-gray-800">2. Module</span> </button>
      <div class="accordion-content bg-gray-50">
       <div class="accordion-inner py-4">
        <p class="text-gray-600 text-sm mb-4">Module content covering the theoretical foundations and key concepts of the lesson.</p>
        <a href="assets/dlsuclass/Day%202%20-%20Kirchhoffs%20Laws%20Module.docx" target="_blank" rel="noopener" class="inline-flex items-center gap-2 px-4 py-2 bg-emerald-600 hover:bg-emerald-700 text-white text-sm font-medium rounded-md transition-colors duration-200">
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
        </svg> Open module file </a>
       </div>
      </div>
     </div><!-- 3. Lesson -->
     <div class="accordion-item border border-gray-200 rounded-lg overflow-hidden" data-index="2"><button class="accordion-header w-full flex items-center gap-3 px-5 py-4 text-left hover:bg-emerald-50 transition-colors duration-200">
       <svg class="accordion-icon w-4 h-4 flex-shrink-0" viewbox="0 0 24 24" fill="none"><path d="M8 5L19 12L8 19V5Z" fill="#1B9C5A" />
       </svg><span class="font-semibold text-gray-800">3. Lesson</span> </button>
      <div class="accordion-content bg-gray-50">
       <div class="accordion-inner py-4">
         <div class="bg-white border border-gray-200 rounded-md p-4 mb-4">
           <h3 class="text-gray-800 text-lg md:text-xl font-bold mb-4">Lesson Slides</h3>
           <div class="w-full">
              <iframe
               class="w-full h-[600px] rounded-md"
               src="https://www.canva.com/design/DAG-FJ9hTJ0/JHEC3ZkzG5M7e5DGpeOS0w/view?embed"
               frameborder="0"
               allowfullscreen
             ></iframe>
           </div>
         </div>

          <div class="bg-white border border-gray-200 rounded-md p-4 mb-4">
            <h3 class="text-gray-800 text-lg md:text-xl font-bold mb-4">How to solve a problem using Kirchhoff's Laws</h3>
            <video class="w-full rounded-md" controls preload="metadata">
              <source src="assets/dlsuclass/Kirchhoff%27s%20Laws.mp4" type="video/mp4">
              Your browser does not support the video tag.
            </video>
          </div>

          <div class="bg-white border border-gray-200 rounded-md p-4 mb-4">
            <h3 class="text-gray-800 text-lg md:text-xl font-bold mb-4">How to use Multisim</h3>
            <video class="w-full rounded-md" controls preload="metadata">
              <source src="assets/dlsuclass/Multisim.mp4" type="video/mp4">
              Your browser does not support the video tag.
            </video>
          </div>

       </div>
      </div>
     </div><!-- 4. Checkpoint -->
     <div class="accordion-item border border-gray-200 rounded-lg overflow-hidden" data-index="3"><button class="accordion-header w-full flex items-center gap-3 px-5 py-4 text-left hover:bg-emerald-50 transition-colors duration-200">
       <svg class="accordion-icon w-4 h-4 flex-shrink-0" viewbox="0 0 24 24" fill="none"><path d="M8 5L19 12L8 19V5Z" fill="#1B9C5A" />
       </svg><span class="font-semibold text-gray-800">4. Checkpoint</span> </button>
      <div class="accordion-content bg-gray-50">
       <div class="accordion-inner py-4">
        <p class="text-gray-600 text-sm mb-4">Self-assessment questions to verify understanding before proceeding to activities.</p>

        <!-- Checkpoint Summary Banner -->
        <div id="checkpoint-summary" class="bg-emerald-50 border border-emerald-200 text-emerald-700 rounded-md p-4 mb-4">
          <div class="font-semibold">Checkpoint</div>
          <div class="text-sm">No answers yet. Submit to see your score.</div>
        </div>

        <!-- Checkpoint Questions Container -->
        <div id="checkpoint-questions"></div>

        <!-- Actions -->
        <div class="mt-2">
          <button id="checkpoint-submit" class="px-4 py-2 bg-emerald-600 hover:bg-emerald-700 text-white text-sm font-medium rounded-md">Submit All</button>
          <button id="checkpoint-reset" class="ml-2 px-3 py-2 border border-gray-300 hover:bg-gray-50 text-gray-700 text-sm rounded-md">Reset</button>
        </div>

       </div>
      </div>
     </div><!-- 5. Activity Instruction -->
     <div class="accordion-item border border-gray-200 rounded-lg overflow-hidden" data-index="4"><button class="accordion-header w-full flex items-center gap-3 px-5 py-4 text-left hover:bg-emerald-50 transition-colors duration-200">
       <svg class="accordion-icon w-4 h-4 flex-shrink-0" viewbox="0 0 24 24" fill="none"><path d="M8 5L19 12L8 19V5Z" fill="#1B9C5A" />
       </svg><span class="font-semibold text-gray-800">5. Activity Instruction</span> </button>
      <div class="accordion-content bg-gray-50">
       <div class="accordion-inner py-4">
        <p class="text-gray-600 text-sm mb-4">In this activity, you will verify Kirchhoff’s Current Law (KCL) and Kirchhoff’s Voltage Law (KVL) using simulation and computation. You will first construct the given DC circuit using a circuit simulation tool and record the current values for each branch. Next, you will analyze the same circuit analytically by writing the appropriate KCL and KVL equations and solving them using MATLAB or Octave.</p>

       </div>
      </div>
     </div><!-- 6. Worksheet -->
     <div class="accordion-item border border-gray-200 rounded-lg overflow-hidden" data-index="5"><button class="accordion-header w-full flex items-center gap-3 px-5 py-4 text-left hover:bg-emerald-50 transition-colors duration-200">
       <svg class="accordion-icon w-4 h-4 flex-shrink-0" viewbox="0 0 24 24" fill="none"><path d="M8 5L19 12L8 19V5Z" fill="#1B9C5A" />
       </svg><span class="font-semibold text-gray-800">6. Worksheet</span> </button>
      <div class="accordion-content bg-gray-50">
       <div class="accordion-inner py-4">
        <p class="text-gray-600 text-sm mb-4">Complete the worksheet and submit it on DLSU Canvas.</p>
        <a href="assets/dlsuclass/Day%202%20-%20Kirchhoffs%20Laws%20Multisim%20and%20Matlab%20Worksheet.docx" download class="inline-flex items-center gap-2 px-4 py-2 bg-emerald-600 hover:bg-emerald-700 text-white text-sm font-medium rounded-md transition-colors duration-200">
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" />
        </svg> Download worksheet </a>
       </div>
      </div>
     </div>
    </main>
   </div>
  </div>
  <script>
    const defaultConfig = {
      course_title: 'Kirchhoff\'s Laws',
      week_num: '2',
      department: 'Physics',
      college: 'Science',
      school: 'De La Salle University – Manila',
      teacher: 'Dr. James Salveo L. Olarve',
      primary_color: '#1B9C5A',
      text_color: '#1f2937',
      background_color: '#ffffff',
      font_family: 'Inter'
    };

    // Accordion functionality
    function initAccordion() {
      const headers = document.querySelectorAll('.accordion-header');
      
      headers.forEach(header => {
        header.addEventListener('click', () => {
          const item = header.closest('.accordion-item');
          const content = item.querySelector('.accordion-content');
          const icon = item.querySelector('.accordion-icon');
          const isExpanded = item.classList.contains('expanded');
          
          if (isExpanded) {
            item.classList.remove('expanded');
            content.classList.remove('expanded');
            icon.classList.remove('rotated');
          } else {
            item.classList.add('expanded');
            content.classList.add('expanded');
            icon.classList.add('rotated');
          }
        });
        
        // Hover effects for triangle
        header.addEventListener('mouseenter', () => {
          const icon = header.querySelector('.accordion-icon path');
          icon.setAttribute('fill', '#2ECC71');
        });
        
        header.addEventListener('mouseleave', () => {
          const item = header.closest('.accordion-item');
          const icon = header.querySelector('.accordion-icon path');
          const isExpanded = item.classList.contains('expanded');
          icon.setAttribute('fill', isExpanded ? '#147A44' : '#1B9C5A');
        });
      });
      
      // Set initial state for expanded items
      document.querySelectorAll('.accordion-item.expanded').forEach(item => {
        const icon = item.querySelector('.accordion-icon path');
        icon.setAttribute('fill', '#147A44');
      });
    }

    async function onConfigChange(config) {
      const fontFamily = config.font_family || defaultConfig.font_family;
      const baseFontStack = 'Arial, sans-serif';
      
      // Update text content
      document.getElementById('course-title').textContent = config.course_title || defaultConfig.course_title;
      document.getElementById('week-num').textContent = config.week_num || defaultConfig.week_num;
      document.getElementById('department').textContent = config.department || defaultConfig.department;
      document.getElementById('college').textContent = config.college || defaultConfig.college;
      document.getElementById('school').textContent = config.school || defaultConfig.school;
      document.getElementById('teacher').textContent = config.teacher || defaultConfig.teacher;
      
      // Apply font family
      document.querySelectorAll('*').forEach(el => {
        el.style.fontFamily = `${fontFamily}, ${baseFontStack}`;
      });
      
      // Apply colors
      const primaryColor = config.primary_color || defaultConfig.primary_color;
      const textColor = config.text_color || defaultConfig.text_color;
      const bgColor = config.background_color || defaultConfig.background_color;
      
      document.body.style.backgroundColor = bgColor;
      document.getElementById('course-title').style.color = textColor;
      
      // Update all accordion icons and buttons with primary color
      document.querySelectorAll('.accordion-icon path').forEach(path => {
        const item = path.closest('.accordion-item');
        const isExpanded = item && item.classList.contains('expanded');
        path.setAttribute('fill', isExpanded ? adjustColor(primaryColor, -20) : primaryColor);
      });
      
      document.querySelectorAll('.accordion-content button').forEach(btn => {
        btn.style.backgroundColor = primaryColor;
      });
    }

    function adjustColor(hex, percent) {
      const num = parseInt(hex.replace('#', ''), 16);
      const amt = Math.round(2.55 * percent);
      const R = Math.max(0, Math.min(255, (num >> 16) + amt));
      const G = Math.max(0, Math.min(255, ((num >> 8) & 0x00FF) + amt));
      const B = Math.max(0, Math.min(255, (num & 0x0000FF) + amt));
      return '#' + (0x1000000 + R * 0x10000 + G * 0x100 + B).toString(16).slice(1);
    }

    function mapToCapabilities(config) {
      return {
        recolorables: [
          {
            get: () => config.background_color || defaultConfig.background_color,
            set: (value) => {
              config.background_color = value;
              if (window.elementSdk) window.elementSdk.setConfig({ background_color: value });
            }
          },
          {
            get: () => config.text_color || defaultConfig.text_color,
            set: (value) => {
              config.text_color = value;
              if (window.elementSdk) window.elementSdk.setConfig({ text_color: value });
            }
          },
          {
            get: () => config.primary_color || defaultConfig.primary_color,
            set: (value) => {
              config.primary_color = value;
              if (window.elementSdk) window.elementSdk.setConfig({ primary_color: value });
            }
          }
        ],
        borderables: [],
        fontEditable: {
          get: () => config.font_family || defaultConfig.font_family,
          set: (value) => {
            config.font_family = value;
            if (window.elementSdk) window.elementSdk.setConfig({ font_family: value });
          }
        },
        fontSizeable: undefined
      };
    }

    function mapToEditPanelValues(config) {
      return new Map([
        ['course_title', config.course_title || defaultConfig.course_title],
        ['week_num', config.week_num || defaultConfig.week_num],
        ['department', config.department || defaultConfig.department],
        ['college', config.college || defaultConfig.college],
        ['school', config.school || defaultConfig.school],
        ['teacher', config.teacher || defaultConfig.teacher]
      ]);
    }

    // Initialize
    initAccordion();
    
    if (window.elementSdk) {
      window.elementSdk.init({
        defaultConfig,
        onConfigChange,
        mapToCapabilities,
        mapToEditPanelValues
      });
    }
  </script>
  <script>
    // Checkpoint (Section 4) scaffold
    const CHECKPOINT_STORAGE_KEY = 'quiz:lbyph1a-kirchhoff:checkpoint4:v1';
    const checkpointQuestions = [
      {
        id: 'kl-q1',
        stem: 'What is the fundamental physical principle behind Kirchhoff\’s Current Law (KCL)?',
        options: [
          'Conservation of energy',
          'Conservation of charge',
          'Ohm\’s Law',
          'Conservation of momentum'
        ],
        correct: 1,
        explanation: 'KCL is based on charge conservation: charge does not accumulate at a node.'
      },
      {
        id: 'kl-q2',
        stem: 'Which of the following best describes Kirchhoff\’s Voltage Law (KVL)?',
        options: [
          'The voltage across all resistors must be equal',
          'The total voltage in a circuit depends on current direction',
          'The algebraic sum of voltages around a closed loop is zero',
          'Voltage always decreases along a loop'
        ],
        correct: 2,
        explanation: 'KVL states that the sum of rises and drops around any closed loop is zero.'
      },
      {
        id: 'kl-q3',
        stem: 'When applying Kirchhoff\’s Laws, why is it acceptable to assume the direction of current?',
        options: [
          'The assumed direction must always be correct',
          'Current direction does not affect voltage',
          'A negative solution simply indicates the actual direction is opposite',
          'Kirchhoff\’s Laws only apply to assumed currents'
        ],
        correct: 2,
        explanation: 'A negative current indicates the true direction is opposite the assumption; equations remain valid.'
      },
      {
        id: 'kl-q4',
        stem: 'In an experimental verification of KCL, why might the total current entering a node not exactly equal the total current leaving?',
        options: [
          'Kirchhoff\’s Laws are only approximations',
          'Current is lost inside the junction',
          'Measurement uncertainties and instrument limitations',
          'Electric charge is not conserved'
        ],
        correct: 2,
        explanation: 'Small discrepancies arise from measurement uncertainty and instrument limitations, not a violation of KCL.'
      },
      {
        id: 'kl-q5',
        stem: 'Which statement best distinguishes Kirchhoff\’s Laws from Ohm\’s Law in circuit analysis?',
        options: [
          'Kirchhoff\’s Laws apply only to ideal circuits, while Ohm\’s Law applies to real circuits',
          'Kirchhoff\’s Laws relate voltage and current in a single component',
          'Kirchhoff\’s Laws analyze complex circuits with multiple loops and junctions',
          'Kirchhoff\’s Laws are valid only when resistance is constant'
        ],
        correct: 2,
        explanation: 'Kirchhoff’s Laws provide node and loop equations for complex circuits; Ohm’s Law relates V, I, and R for components.'
      },
      {
        id: 'kl-q6',
        stem: 'At a junction, 5 A enters while two currents of 2 A and 1 A leave. According to KCL, what is the remaining current leaving the node?',
        options: [
          '1 A',
          '2 A',
          '3 A',
          '4 A'
        ],
        correct: 1,
        explanation: 'KCL: 5 A in = (2 + 1 + x) out ⇒ x = 2 A.'
      },
      {
        id: 'kl-q7',
        stem: 'A loop contains a 12 V battery and two resistors with drops of 5 V and 7 V. What is the algebraic sum of voltages around the loop?',
        options: [
          '−12 V',
          '0 V',
          '+12 V',
          '+24 V'
        ],
        correct: 1,
        explanation: 'KVL: 12 V rise − (5 V + 7 V) = 0 V; sum around the loop is zero.'
      },
      {
        id: 'kl-q8',
        stem: 'In a loop, a battery supplies 9 V and a single resistor has R = 3 Ω. What is the current?',
        options: [
          '1 A',
          '2 A',
          '3 A',
          '6 A'
        ],
        correct: 2,
        explanation: 'Ohm’s Law: I = V/R = 9/3 = 3 A.'
      },
      {
        id: 'kl-q9',
        stem: 'A two-loop solution gives a current of −0.5 A in one branch. What does this indicate?',
        options: [
          'There is no current in that branch',
          'The circuit violates Kirchhoff\’s Laws',
          'The actual current flows opposite to the assumed direction',
          'The resistor value is incorrect'
        ],
        correct: 2,
        explanation: 'Negative sign means the true current direction is opposite the assumed direction.'
      },
      {
        id: 'kl-q10',
        stem: 'Total voltage rise measured is 6.02 V, while total drop is 5.90 V. What best explains this difference?',
        options: [
          'Kirchhoff\’s Voltage Law is invalid',
          'The loop is not closed',
          'Experimental errors and internal resistance',
          'Voltage is lost at the junctions'
        ],
        correct: 2,
        explanation: 'Minor differences are due to measurement errors and internal resistance, not KVL violation.'
      }
    ];

    function loadCheckpointState() {
      try { return JSON.parse(localStorage.getItem(CHECKPOINT_STORAGE_KEY) || '{}'); } catch { return {}; }
    }

    function saveCheckpointState(state) {
      try { localStorage.setItem(CHECKPOINT_STORAGE_KEY, JSON.stringify(state || {})); } catch {}
    }

    function renderCheckpoint() {
      const container = document.getElementById('checkpoint-questions');
      const summary = document.getElementById('checkpoint-summary');
      if (!container || !summary) return;
      const state = loadCheckpointState();
      container.innerHTML = '';

      checkpointQuestions.forEach((q, qi) => {
        const selected = state.answers?.[q.id] ?? null;
        const card = document.createElement('div');
        card.className = 'bg-white border border-gray-200 rounded-md p-4 mb-4';
        const fieldsetId = `q${qi}`;
        const header = `<div class="text-gray-800 font-medium mb-2">Question ${qi + 1}</div>`;
        const stem = `<p class="text-gray-700 mb-3">${q.stem}</p>`;
        let optionsHtml = '';
        q.options.forEach((opt, oi) => {
          const inputId = `${fieldsetId}-opt${oi}`;
          const checked = selected === oi ? 'checked' : '';
          optionsHtml += `
            <div class="flex items-start gap-2 p-2 rounded hover:bg-gray-50">
              <input type="radio" id="${inputId}" name="${fieldsetId}" value="${oi}" class="mt-0.5 accent-emerald-600 focus:ring-2 focus:ring-emerald-600" ${checked} />
              <label for="${inputId}" class="text-gray-700">${opt}</label>
            </div>`;
        });
        const feedbackText = state.submitted ? (selected === q.correct ? 'Correct.' : 'Incorrect.') : '';
        const feedbackClass = state.submitted
          ? (selected === q.correct
              ? 'bg-emerald-50 border-emerald-200 text-emerald-700'
              : 'bg-red-50 border-red-200 text-red-700')
          : 'hidden';
        const feedback = `<div class="${feedbackClass} border rounded p-2 mt-3 text-sm"><span class="font-semibold">${feedbackText}</span> ${state.submitted ? q.explanation : ''}</div>`;
        card.innerHTML = header + stem + `<fieldset class="mb-2">${optionsHtml}</fieldset>` + feedback;
        container.appendChild(card);
      });

      // Update summary
      if (state.submitted) {
        const score = checkpointQuestions.reduce((acc, q) => acc + ((state.answers?.[q.id] ?? -1) === q.correct ? 1 : 0), 0);
        summary.innerHTML = `<div class="font-semibold">Checkpoint</div><div class="text-sm">Score: ${score}/${checkpointQuestions.length} (${Math.round((score / checkpointQuestions.length) * 100)}%)</div>`;
      } else {
        summary.innerHTML = `<div class="font-semibold">Checkpoint</div><div class="text-sm">No answers yet. Submit to see your score.</div>`;
      }

      // Wire selection persistence
      container.querySelectorAll('input[type="radio"]').forEach(input => {
        input.addEventListener('change', (e) => {
          const name = e.target.name; // q{index}
          const qi = parseInt(name.replace('q', ''), 10);
          const q = checkpointQuestions[qi];
          const state = loadCheckpointState();
          state.answers = state.answers || {};
          state.answers[q.id] = parseInt(e.target.value, 10);
          state.submitted = false; // changing answer resets submitted state
          saveCheckpointState(state);
          // Re-render to hide feedback until submission and reflect selection
          renderCheckpoint();
        });
      });
    }

    function submitCheckpoint() {
      const state = loadCheckpointState();
      if (!state.answers) state.answers = {};
      state.submitted = true;
      saveCheckpointState(state);
      renderCheckpoint();
    }

    function resetCheckpoint() {
      saveCheckpointState({ answers: {}, submitted: false });
      renderCheckpoint();
    }

    // Wire actions after DOM is ready
    document.addEventListener('DOMContentLoaded', () => {
      renderCheckpoint();
      const submitBtn = document.getElementById('checkpoint-submit');
      const resetBtn = document.getElementById('checkpoint-reset');
      if (submitBtn) submitBtn.addEventListener('click', submitCheckpoint);
      if (resetBtn) resetBtn.addEventListener('click', resetCheckpoint);
    });
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9bb87f3f86428d03',t:'MTc2ODAwOTU0OS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>